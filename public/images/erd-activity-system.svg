<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 900" style="background: linear-gradient(135deg, #fef3f2 0%, #fae8ff 100%);">
  <defs>
    <style>
      .entity-box { fill: white; stroke: #a855f7; stroke-width: 2; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1)); }
      .entity-title { fill: #7c3aed; font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; }
      .entity-attr { fill: #374151; font-family: 'Courier New', monospace; font-size: 11px; }
      .relationship-line { stroke: #a855f7; stroke-width: 2; fill: none; }
      .relationship-text { fill: #7c3aed; font-family: Arial, sans-serif; font-size: 12px; font-weight: bold; }
      .cardinality { fill: #a855f7; font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; }
      .pk { fill: #eab308; font-weight: bold; }
      .fk { fill: #ef4444; font-weight: bold; }
      .status-enum { fill: #059669; font-size: 10px; font-style: italic; }
    </style>
  </defs>
  
  <!-- Title -->
  <text x="700" y="30" text-anchor="middle" style="fill: #7c3aed; font-family: Arial, sans-serif; font-size: 24px; font-weight: bold;">Activity and Student Progress Tracking - ERD</text>
  
  <!-- MODULES Entity (reference) -->
  <g id="modules">
    <rect x="50" y="80" width="220" height="140" rx="8" class="entity-box"/>
    <rect x="50" y="80" width="220" height="40" rx="8" fill="#8b5cf6"/>
    <text x="160" y="105" text-anchor="middle" style="fill: white; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold;">MODULES</text>
    <text x="70" y="145" class="entity-attr"><tspan class="pk">• id</tspan> (PK)</text>
    <text x="70" y="165" class="entity-attr"><tspan class="fk">• course_id</tspan> (FK)</text>
    <text x="70" y="185" class="entity-attr">• title</text>
    <text x="70" y="205" class="entity-attr">• weight (%)</text>
  </g>
  
  <!-- ACTIVITIES Entity -->
  <g id="activities">
    <rect x="380" y="60" width="280" height="200" rx="8" class="entity-box"/>
    <rect x="380" y="60" width="280" height="40" rx="8" fill="#ec4899"/>
    <text x="520" y="85" text-anchor="middle" style="fill: white; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold;">ACTIVITIES</text>
    <text x="400" y="120" class="entity-attr"><tspan class="pk">• id</tspan> (PK)</text>
    <text x="400" y="140" class="entity-attr"><tspan class="fk">• module_id</tspan> (FK)</text>
    <text x="400" y="160" class="entity-attr"><tspan class="fk">• activity_type_id</tspan> (FK)</text>
    <text x="400" y="180" class="entity-attr">• title</text>
    <text x="400" y="200" class="entity-attr">• description</text>
    <text x="400" y="220" class="entity-attr">• points</text>
    <text x="400" y="240" class="entity-attr">• duration_minutes</text>
  </g>
  
  <!-- ACTIVITY_TYPES Entity -->
  <g id="activity-types">
    <rect x="800" y="60" width="280" height="200" rx="8" class="entity-box"/>
    <rect x="800" y="60" width="280" height="40" rx="8" fill="#f59e0b"/>
    <text x="940" y="85" text-anchor="middle" style="fill: white; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold;">ACTIVITY_TYPES</text>
    <text x="820" y="120" class="entity-attr"><tspan class="pk">• id</tspan> (PK)</text>
    <text x="820" y="140" class="entity-attr">• name</text>
    <text x="820" y="160" class="status-enum">  (quiz, lesson, video,</text>
    <text x="820" y="175" class="status-enum">   reading, assignment)</text>
    <text x="820" y="195" class="entity-attr">• icon</text>
    <text x="820" y="215" class="entity-attr">• color</text>
    <text x="820" y="235" class="entity-attr">• created_at</text>
  </g>
  
  <!-- STUDENTS Entity (reference) -->
  <g id="students">
    <rect x="50" y="320" width="220" height="160" rx="8" class="entity-box"/>
    <rect x="50" y="320" width="220" height="40" rx="8" fill="#10b981"/>
    <text x="160" y="345" text-anchor="middle" style="fill: white; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold;">STUDENTS</text>
    <text x="70" y="380" class="entity-attr"><tspan class="pk">• id</tspan> (PK)</text>
    <text x="70" y="400" class="entity-attr"><tspan class="fk">• user_id</tspan> (FK)</text>
    <text x="70" y="420" class="entity-attr">• student_id</text>
    <text x="70" y="440" class="entity-attr">• grade_level_id</text>
    <text x="70" y="460" class="entity-attr">• cumulative_gpa</text>
  </g>
  
  <!-- STUDENT_ACTIVITIES Entity -->
  <g id="student-activities">
    <rect x="380" y="320" width="280" height="280" rx="8" class="entity-box"/>
    <rect x="380" y="320" width="280" height="40" rx="8" fill="#06b6d4"/>
    <text x="520" y="345" text-anchor="middle" style="fill: white; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold;">STUDENT_ACTIVITIES</text>
    <text x="400" y="380" class="entity-attr"><tspan class="pk">• id</tspan> (PK)</text>
    <text x="400" y="400" class="entity-attr"><tspan class="fk">• student_id</tspan> (FK)</text>
    <text x="400" y="420" class="entity-attr"><tspan class="fk">• activity_id</tspan> (FK)</text>
    <text x="400" y="440" class="entity-attr">• status</text>
    <text x="400" y="455" class="status-enum">  (not_started, in_progress,</text>
    <text x="400" y="470" class="status-enum">   completed)</text>
    <text x="400" y="490" class="entity-attr">• score</text>
    <text x="400" y="510" class="entity-attr">• max_score</text>
    <text x="400" y="530" class="entity-attr">• percentage</text>
    <text x="400" y="550" class="entity-attr">• time_spent_minutes</text>
    <text x="400" y="570" class="entity-attr">• started_at</text>
    <text x="400" y="590" class="entity-attr">• completed_at</text>
  </g>
  
  <!-- QUIZ_ATTEMPTS Entity -->
  <g id="quiz-attempts">
    <rect x="800" y="320" width="280" height="260" rx="8" class="entity-box"/>
    <rect x="800" y="320" width="280" height="40" rx="8" fill="#8b5cf6"/>
    <text x="940" y="345" text-anchor="middle" style="fill: white; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold;">QUIZ_ATTEMPTS</text>
    <text x="820" y="380" class="entity-attr"><tspan class="pk">• id</tspan> (PK)</text>
    <text x="820" y="400" class="entity-attr"><tspan class="fk">• student_activity_id</tspan> (FK)</text>
    <text x="820" y="420" class="entity-attr"><tspan class="fk">• quiz_id</tspan> (FK)</text>
    <text x="820" y="440" class="entity-attr">• score</text>
    <text x="820" y="460" class="entity-attr">• total_points</text>
    <text x="820" y="480" class="entity-attr">• percentage</text>
    <text x="820" y="500" class="entity-attr">• started_at</text>
    <text x="820" y="520" class="entity-attr">• completed_at</text>
    <text x="820" y="540" class="entity-attr">• time_spent_seconds</text>
    <text x="820" y="560" class="entity-attr">• created_at</text>
  </g>
  
  <!-- QUIZ_RESPONSES Entity -->
  <g id="quiz-responses">
    <rect x="1180" y="320" width="280" height="220" rx="8" class="entity-box"/>
    <rect x="1180" y="320" width="280" height="40" rx="8" fill="#ec4899"/>
    <text x="1320" y="345" text-anchor="middle" style="fill: white; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold;">QUIZ_RESPONSES</text>
    <text x="1200" y="380" class="entity-attr"><tspan class="pk">• id</tspan> (PK)</text>
    <text x="1200" y="400" class="entity-attr"><tspan class="fk">• quiz_attempt_id</tspan> (FK)</text>
    <text x="1200" y="420" class="entity-attr"><tspan class="fk">• question_id</tspan> (FK)</text>
    <text x="1200" y="440" class="entity-attr">• selected_answer</text>
    <text x="1200" y="460" class="entity-attr">• is_correct</text>
    <text x="1200" y="480" class="entity-attr">• points_earned</text>
    <text x="1200" y="500" class="entity-attr">• answered_at</text>
    <text x="1200" y="520" class="entity-attr">• created_at</text>
  </g>
  
  <!-- Relationships -->
  
  <!-- Modules to Activities (1:M) -->
  <path d="M 270 150 L 380 150" class="relationship-line" marker-end="url(#arrowpurple)"/>
  <text x="290" y="140" class="cardinality">1</text>
  <text x="355" y="140" class="cardinality">M</text>
  <text x="300" y="170" class="relationship-text">contains</text>
  
  <!-- Activities to ActivityTypes (M:1) -->
  <path d="M 660 160 L 800 160" class="relationship-line" marker-end="url(#arrowpurple)"/>
  <text x="680" y="150" class="cardinality">M</text>
  <text x="775" y="150" class="cardinality">1</text>
  <text x="705" y="180" class="relationship-text">has type</text>
  
  <!-- Activities to StudentActivities (1:M) -->
  <path d="M 520 260 L 520 320" class="relationship-line" marker-end="url(#arrowpurple)"/>
  <text x="505" y="280" class="cardinality">1</text>
  <text x="505" y="310" class="cardinality">M</text>
  <text x="535" y="295" class="relationship-text">tracked by</text>
  
  <!-- Students to StudentActivities (1:M) -->
  <path d="M 270 400 L 380 400" class="relationship-line" marker-end="url(#arrowpurple)"/>
  <text x="290" y="390" class="cardinality">1</text>
  <text x="355" y="390" class="cardinality">M</text>
  <text x="300" y="420" class="relationship-text">completes</text>
  
  <!-- StudentActivities to QuizAttempts (1:1) -->
  <path d="M 660 450 L 800 450" class="relationship-line" marker-end="url(#arrowpurple)"/>
  <text x="680" y="440" class="cardinality">1</text>
  <text x="775" y="440" class="cardinality">1</text>
  <text x="690" y="470" class="relationship-text">for quizzes</text>
  
  <!-- QuizAttempts to QuizResponses (1:M) -->
  <path d="M 1080 430 L 1180 430" class="relationship-line" marker-end="url(#arrowpurple)"/>
  <text x="1100" y="420" class="cardinality">1</text>
  <text x="1155" y="420" class="cardinality">M</text>
  <text x="1105" y="450" class="relationship-text">has answers</text>
  
  <!-- Arrow marker -->
  <defs>
    <marker id="arrowpurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#a855f7" />
    </marker>
  </defs>
  
  <!-- Legend -->
  <g id="legend">
    <rect x="50" y="650" width="1000" height="180" rx="8" fill="white" stroke="#94a3b8" stroke-width="2" opacity="0.95"/>
    <text x="550" y="680" text-anchor="middle" style="fill: #7c3aed; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold;">Activity Status Flow</text>
    
    <!-- Status Flow Diagram -->
    <circle cx="150" cy="730" r="35" fill="#64748b" stroke="#475569" stroke-width="2"/>
    <text x="150" y="735" text-anchor="middle" style="fill: white; font-family: Arial, sans-serif; font-size: 12px; font-weight: bold;">not_started</text>
    
    <path d="M 185 730 L 265 730" stroke="#a855f7" stroke-width="3" marker-end="url(#arrowpurple)"/>
    
    <circle cx="300" cy="730" r="35" fill="#3b82f6" stroke="#2563eb" stroke-width="2"/>
    <text x="300" y="735" text-anchor="middle" style="fill: white; font-family: Arial, sans-serif; font-size: 12px; font-weight: bold;">in_progress</text>
    
    <path d="M 335 730 L 415 730" stroke="#a855f7" stroke-width="3" marker-end="url(#arrowpurple)"/>
    
    <circle cx="450" cy="730" r="35" fill="#10b981" stroke="#059669" stroke-width="2"/>
    <text x="450" y="735" text-anchor="middle" style="fill: white; font-family: Arial, sans-serif; font-size: 12px; font-weight: bold;">completed</text>
    
    <text x="150" y="780" text-anchor="middle" style="fill: #64748b; font-family: Arial, sans-serif; font-size: 11px;">Initial state</text>
    <text x="300" y="780" text-anchor="middle" style="fill: #3b82f6; font-family: Arial, sans-serif; font-size: 11px;">Student working</text>
    <text x="450" y="780" text-anchor="middle" style="fill: #10b981; font-family: Arial, sans-serif; font-size: 11px;">Finished</text>
    
    <!-- Additional Info -->
    <text x="600" y="710" class="entity-attr"><tspan class="pk">• PK</tspan> = Primary Key</text>
    <text x="600" y="730" class="entity-attr"><tspan class="fk">• FK</tspan> = Foreign Key</text>
    <text x="600" y="750" class="entity-attr"><tspan style="fill: #a855f7; font-weight: bold;">1</tspan> = One (required)</text>
    <text x="600" y="770" class="entity-attr"><tspan style="fill: #a855f7; font-weight: bold;">M</tspan> = Many</text>
    
    <text x="850" y="710" class="entity-attr">Activity → Type (M:1)</text>
    <text x="850" y="730" class="entity-attr">Activity → StudentActivity (1:M)</text>
    <text x="850" y="750" class="entity-attr">StudentActivity → QuizAttempt (1:1)</text>
    <text x="850" y="770" class="entity-attr">QuizAttempt → Responses (1:M)</text>
  </g>
  
  <!-- Footer -->
  <text x="700" y="870" text-anchor="middle" style="fill: #64748b; font-family: Arial, sans-serif; font-size: 12px;">AstroLearn LMS - Activity and Progress Tracking ERD © 2025</text>
</svg>