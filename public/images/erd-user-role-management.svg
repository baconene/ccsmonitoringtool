<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900" style="background: linear-gradient(135deg, #fef2f2 0%, #fef3c7 100%);">
  <defs>
    <style>
      .entity-box { fill: white; stroke: #ef4444; stroke-width: 2; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1)); }
      .entity-title { fill: #dc2626; font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; }
      .entity-attr { fill: #374151; font-family: 'Courier New', monospace; font-size: 11px; }
      .relationship-line { stroke: #ef4444; stroke-width: 2; fill: none; }
      .relationship-text { fill: #dc2626; font-family: Arial, sans-serif; font-size: 12px; font-weight: bold; }
      .cardinality { fill: #ef4444; font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; }
      .pk { fill: #eab308; font-weight: bold; }
      .fk { fill: #ef4444; font-weight: bold; }
      .role-enum { fill: #dc2626; font-size: 10px; font-style: italic; }
      .matrix-header { fill: white; font-family: Arial, sans-serif; font-size: 11px; font-weight: bold; }
      .matrix-cell { fill: #374151; font-family: Arial, sans-serif; font-size: 10px; }
    </style>
  </defs>
  
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" style="fill: #dc2626; font-family: Arial, sans-serif; font-size: 24px; font-weight: bold;">User Role Management System - ERD</text>
  
  <!-- USERS Entity (Center) -->
  <g id="users">
    <rect x="440" y="80" width="320" height="260" rx="8" class="entity-box"/>
    <rect x="440" y="80" width="320" height="40" rx="8" fill="#ef4444"/>
    <text x="600" y="105" text-anchor="middle" style="fill: white; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold;">USERS</text>
    <text x="460" y="140" class="entity-attr"><tspan class="pk">• id</tspan> (PK)</text>
    <text x="460" y="160" class="entity-attr">• name</text>
    <text x="460" y="180" class="entity-attr">• email (UNIQUE)</text>
    <text x="460" y="200" class="entity-attr">• password (hashed)</text>
    <text x="460" y="220" class="entity-attr">• role (ENUM)</text>
    <text x="460" y="235" class="role-enum">  (admin, teacher, student)</text>
    <text x="460" y="255" class="entity-attr">• email_verified_at</text>
    <text x="460" y="275" class="entity-attr">• remember_token</text>
    <text x="460" y="295" class="entity-attr">• created_at</text>
    <text x="460" y="315" class="entity-attr">• updated_at</text>
  </g>
  
  <!-- STUDENTS Entity -->
  <g id="students">
    <rect x="80" y="420" width="320" height="200" rx="8" class="entity-box"/>
    <rect x="80" y="420" width="320" height="40" rx="8" fill="#10b981"/>
    <text x="240" y="445" text-anchor="middle" style="fill: white; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold;">STUDENTS</text>
    <text x="100" y="480" class="entity-attr"><tspan class="pk">• id</tspan> (PK)</text>
    <text x="100" y="500" class="entity-attr"><tspan class="fk">• user_id</tspan> (FK) UNIQUE</text>
    <text x="100" y="520" class="entity-attr">• student_id (unique identifier)</text>
    <text x="100" y="540" class="entity-attr"><tspan class="fk">• grade_level_id</tspan> (FK)</text>
    <text x="100" y="560" class="entity-attr">• date_of_birth</text>
    <text x="100" y="580" class="entity-attr">• parent_contact</text>
    <text x="100" y="600" class="entity-attr">• created_at</text>
  </g>
  
  <!-- INSTRUCTORS Entity -->
  <g id="instructors">
    <rect x="800" y="420" width="320" height="200" rx="8" class="entity-box"/>
    <rect x="800" y="420" width="320" height="40" rx="8" fill="#8b5cf6"/>
    <text x="960" y="445" text-anchor="middle" style="fill: white; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold;">INSTRUCTORS</text>
    <text x="820" y="480" class="entity-attr"><tspan class="pk">• id</tspan> (PK)</text>
    <text x="820" y="500" class="entity-attr"><tspan class="fk">• user_id</tspan> (FK) UNIQUE</text>
    <text x="820" y="520" class="entity-attr">• department</text>
    <text x="820" y="540" class="entity-attr">• bio</text>
    <text x="820" y="560" class="entity-attr">• expertise</text>
    <text x="820" y="580" class="entity-attr">• office_location</text>
    <text x="820" y="600" class="entity-attr">• created_at</text>
  </g>
  
  <!-- Relationships -->
  
  <!-- Users to Students (1:0..1) -->
  <path d="M 520 340 L 240 420" class="relationship-line" marker-end="url(#arrowred)"/>
  <text x="500" y="360" class="cardinality">1</text>
  <text x="260" y="410" class="cardinality">0..1</text>
  <text x="340" y="380" class="relationship-text">can be</text>
  
  <!-- Users to Instructors (1:0..1) -->
  <path d="M 680 340 L 960 420" class="relationship-line" marker-end="url(#arrowred)"/>
  <text x="700" y="360" class="cardinality">1</text>
  <text x="940" y="410" class="cardinality">0..1</text>
  <text x="780" y="380" class="relationship-text">can be</text>
  
  <!-- Arrow marker -->
  <defs>
    <marker id="arrowred" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#ef4444" />
    </marker>
  </defs>
  
  <!-- Access Control Matrix -->
  <g id="access-matrix">
    <rect x="50" y="680" width="1100" height="180" rx="8" fill="white" stroke="#ef4444" stroke-width="2" opacity="0.95"/>
    <text x="600" y="705" text-anchor="middle" style="fill: #dc2626; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold;">Access Control Matrix</text>
    
    <!-- Header Row -->
    <rect x="70" y="720" width="250" height="30" fill="#64748b"/>
    <rect x="320" y="720" width="250" height="30" fill="#ef4444"/>
    <rect x="570" y="720" width="250" height="30" fill="#8b5cf6"/>
    <rect x="820" y="720" width="250" height="30" fill="#10b981"/>
    
    <text x="195" y="740" text-anchor="middle" class="matrix-header">Permission</text>
    <text x="445" y="740" text-anchor="middle" class="matrix-header">Admin</text>
    <text x="695" y="740" text-anchor="middle" class="matrix-header">Teacher</text>
    <text x="945" y="740" text-anchor="middle" class="matrix-header">Student</text>
    
    <!-- Row 1 -->
    <rect x="70" y="750" width="250" height="25" fill="#f1f5f9"/>
    <text x="85" y="767" class="matrix-cell">Manage All Users</text>
    <text x="445" y="767" text-anchor="middle" class="matrix-cell" style="fill: #10b981; font-size: 16px;">✓</text>
    <text x="695" y="767" text-anchor="middle" class="matrix-cell" style="fill: #ef4444; font-size: 16px;">✗</text>
    <text x="945" y="767" text-anchor="middle" class="matrix-cell" style="fill: #ef4444; font-size: 16px;">✗</text>
    
    <!-- Row 2 -->
    <rect x="70" y="775" width="250" height="25" fill="white"/>
    <text x="85" y="792" class="matrix-cell">Create/Edit Courses</text>
    <text x="445" y="792" text-anchor="middle" class="matrix-cell" style="fill: #10b981; font-size: 16px;">✓</text>
    <text x="695" y="792" text-anchor="middle" class="matrix-cell" style="fill: #10b981; font-size: 16px;">✓</text>
    <text x="945" y="792" text-anchor="middle" class="matrix-cell" style="fill: #ef4444; font-size: 16px;">✗</text>
    
    <!-- Row 3 -->
    <rect x="70" y="800" width="250" height="25" fill="#f1f5f9"/>
    <text x="85" y="817" class="matrix-cell">Enroll Students</text>
    <text x="445" y="817" text-anchor="middle" class="matrix-cell" style="fill: #10b981; font-size: 16px;">✓</text>
    <text x="695" y="817" text-anchor="middle" class="matrix-cell" style="fill: #10b981; font-size: 16px;">✓</text>
    <text x="945" y="817" text-anchor="middle" class="matrix-cell" style="fill: #ef4444; font-size: 16px;">✗</text>
    
    <!-- Row 4 -->
    <rect x="70" y="825" width="250" height="25" fill="white"/>
    <text x="85" y="842" class="matrix-cell">Take Quizzes</text>
    <text x="445" y="842" text-anchor="middle" class="matrix-cell" style="fill: #ef4444; font-size: 16px;">✗</text>
    <text x="695" y="842" text-anchor="middle" class="matrix-cell" style="fill: #ef4444; font-size: 16px;">✗</text>
    <text x="945" y="842" text-anchor="middle" class="matrix-cell" style="fill: #10b981; font-size: 16px;">✓</text>
  </g>
  
  <!-- Legend -->
  <g id="legend">
    <rect x="1210" y="680" width="0" height="0"/>
    <!-- Compact legend in header area -->
  </g>
  
  <!-- Role Description Boxes -->
  <g id="role-descriptions">
    <rect x="80" y="650" width="320" height="20" rx="4" fill="#ef4444" opacity="0.2"/>
    <text x="240" y="664" text-anchor="middle" style="fill: #dc2626; font-family: Arial, sans-serif; font-size: 12px; font-weight: bold;">Admin: Full System Control</text>
    
    <rect x="440" y="650" width="320" height="20" rx="4" fill="#8b5cf6" opacity="0.2"/>
    <text x="600" y="664" text-anchor="middle" style="fill: #7c3aed; font-family: Arial, sans-serif; font-size: 12px; font-weight: bold;">Teacher: Course Management</text>
    
    <rect x="800" y="650" width="320" height="20" rx="4" fill="#10b981" opacity="0.2"/>
    <text x="960" y="664" text-anchor="middle" style="fill: #059669; font-family: Arial, sans-serif; font-size: 12px; font-weight: bold;">Student: Learning Access</text>
  </g>
  
  <!-- Footer -->
  <text x="600" y="890" text-anchor="middle" style="fill: #64748b; font-family: Arial, sans-serif; font-size: 12px;">AstroLearn LMS - User Role Management ERD © 2025</text>
</svg>