# Dynamic Grade Weight System - Visual Flow

## ğŸ“Š Weight Normalization Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MODULE GRADE CALCULATION                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: CHECK WHAT EXISTS IN MODULE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Module Components Check     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Has Lessons?   [âœ“/âœ—]  â”‚  â”‚
â”‚  â”‚ Has Activities? [âœ“/âœ—]  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
              
Step 2: ADJUST MODULE COMPONENT WEIGHTS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Configured: Lessons 20% | Activities 80%                â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Both Exist     â”‚  Only Lessons    â”‚ Only Activities  â”‚â”‚
â”‚  â”‚  âœ“ Lessons      â”‚  âœ“ Lessons       â”‚ âœ— Lessons        â”‚â”‚
â”‚  â”‚  âœ“ Activities   â”‚  âœ— Activities    â”‚ âœ“ Activities     â”‚â”‚
â”‚  â”‚                 â”‚                  â”‚                  â”‚â”‚
â”‚  â”‚  USE CONFIG:    â”‚  ADJUST:         â”‚ ADJUST:          â”‚â”‚
â”‚  â”‚  L: 20%         â”‚  L: 100% â†       â”‚ L: 0%            â”‚â”‚
â”‚  â”‚  A: 80%         â”‚  A: 0%           â”‚ A: 100% â†        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
              
Step 3: CHECK ACTIVITY TYPES (if activities exist)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Activity Types Present in Module                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Quiz        [âœ“/âœ—]   Configured: 30%           â”‚  â”‚
â”‚  â”‚ Assignment  [âœ“/âœ—]   Configured: 15%           â”‚  â”‚
â”‚  â”‚ Assessment  [âœ“/âœ—]   Configured: 35%           â”‚  â”‚
â”‚  â”‚ Exercise    [âœ“/âœ—]   Configured: 20%           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
              
Step 4: NORMALIZE ACTIVITY TYPE WEIGHTS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Example: Only Quiz + Assignment exist                      â”‚
â”‚                                                               â”‚
â”‚  Configured Weights:                                         â”‚
â”‚  â”œâ”€ Quiz: 30%        âœ“ Present                              â”‚
â”‚  â”œâ”€ Assignment: 15%  âœ“ Present                              â”‚
â”‚  â”œâ”€ Assessment: 35%  âœ— Missing                              â”‚
â”‚  â””â”€ Exercise: 20%    âœ— Missing                              â”‚
â”‚                                                               â”‚
â”‚  Total Configured (existing only): 30 + 15 = 45%            â”‚
â”‚                                                               â”‚
â”‚  NORMALIZE TO 100%:                                          â”‚
â”‚  â”œâ”€ Quiz: (30/45) Ã— 100 = 66.67% â†                          â”‚
â”‚  â””â”€ Assignment: (15/45) Ã— 100 = 33.33% â†                    â”‚
â”‚                                                               â”‚
â”‚  âœ… Total: 100% (always!)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
              
Step 5: CALCULATE SCORES
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Lesson Score:                                                â”‚
â”‚  â””â”€ (Completed Lessons / Total Lessons) Ã— 100               â”‚
â”‚     Example: 2/2 = 100%                                       â”‚
â”‚                                                               â”‚
â”‚  Activity Score (Weighted Average):                          â”‚
â”‚  â””â”€ Î£(Type Score Ã— Normalized Weight)                       â”‚
â”‚     Example: (Quiz 80% Ã— 66.67%) + (Assign 85% Ã— 33.33%)    â”‚
â”‚              = 53.34 + 28.33 = 81.67%                        â”‚
â”‚                                                               â”‚
â”‚  Module Score:                                               â”‚
â”‚  â””â”€ (Lesson Score Ã— Lesson Weight) +                        â”‚
â”‚      (Activity Score Ã— Activity Weight)                      â”‚
â”‚     Example: (100% Ã— 20%) + (81.67% Ã— 80%)                  â”‚
â”‚              = 20 + 65.34 = 85.34%                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Before vs After Comparison

### âŒ BEFORE (Bug):
```
Module: 1 Lesson + 2 Quizzes
Configured: Lessons 20%, Activities 80%
Activity Types: Quiz 30%, Assignment 15%, Assessment 35%, Exercise 20%

Calculation:
â”œâ”€ Lesson: 90% Ã— 20% = 18 points
â”œâ”€ Quiz Avg: 85%
â””â”€ Activities: 85% Ã— 80% = 68 points  â† WRONG!

Module Score: 86%

Problem: Quiz was only 30% of activity weight, but system ignored
         the missing 70% from other activity types!
```

### âœ… AFTER (Fixed):
```
Module: 1 Lesson + 2 Quizzes  
Configured: Lessons 20%, Activities 80%
Activity Types: Quiz 30%, Assignment 15%, Assessment 35%, Exercise 20%

Calculation:
â”œâ”€ Lesson: 90% Ã— 20% = 18 points
â”œâ”€ Detect: Only Quiz exists in activities
â”œâ”€ Normalize: Quiz = 30/30 Ã— 100 = 100% âœ“
â”œâ”€ Quiz Avg: 85% Ã— 100% = 85% (activity score)
â””â”€ Activities: 85% Ã— 80% = 68 points âœ“ CORRECT!

Module Score: 86%

Fixed: Quiz now gets 100% of activity weight since it's the only
       activity type present!
```

## ğŸ“± Simulator Interface

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Grade Simulator                                            â”‚
â”‚  Toggle which components exist to see dynamic weights      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â˜‘ Lessons                                    [20%]        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Score: [90]                              â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”              â”‚
â”‚                                                              â”‚
â”‚  Activity Scores                              [80%]        â”‚
â”‚                                                              â”‚
â”‚  â˜‘ Quiz                                      [66.7%]       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Score: [80]                              â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  â˜‘ Assignment                                [33.3%]       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Score: [85]                              â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  â˜ Assessment                                [0%]          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Score: [88]  (disabled, grayed out)     â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  â˜ Exercise                                  [0%]          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Score: [80]  (disabled, grayed out)     â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”              â”‚
â”‚                                                              â”‚
â”‚  ğŸ“Š Result                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Lesson Contribution:    18.00%                       â”‚ â”‚
â”‚  â”‚ Activity Score:         81.67%                       â”‚ â”‚
â”‚  â”‚ Activity Contribution:  65.34%                       â”‚ â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â”‚         Module Score                                  â”‚ â”‚
â”‚  â”‚            83.34%                                     â”‚ â”‚
â”‚  â”‚              B                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Weight Normalization Examples

### Example 1: All Activity Types Present
```
Configured:  Quiz 30% | Assignment 15% | Assessment 35% | Exercise 20%
Present:     âœ“         âœ“                âœ“                âœ“
Total:       30 + 15 + 35 + 20 = 100%

Normalized:  Quiz 30% | Assignment 15% | Assessment 35% | Exercise 20%
             (30/100Ã—100) (15/100Ã—100)  (35/100Ã—100)    (20/100Ã—100)
             
Result: Weights unchanged (all present)
```

### Example 2: Only Quiz
```
Configured:  Quiz 30% | Assignment 15% | Assessment 35% | Exercise 20%
Present:     âœ“         âœ—                âœ—                âœ—
Total:       30 + 0 + 0 + 0 = 30%

Normalized:  Quiz 100% | Assignment 0% | Assessment 0% | Exercise 0%
             (30/30Ã—100)  (not present)  (not present)  (not present)
             
Result: Quiz takes 100% since it's the only type
```

### Example 3: Quiz + Assignment + Exercise
```
Configured:  Quiz 30% | Assignment 15% | Assessment 35% | Exercise 20%
Present:     âœ“         âœ“                âœ—                âœ“
Total:       30 + 15 + 0 + 20 = 65%

Normalized:  Quiz 46.15% | Assignment 23.08% | Assessment 0% | Exercise 30.77%
             (30/65Ã—100)   (15/65Ã—100)         (not present)  (20/65Ã—100)
             
Result: Weights redistributed proportionally among present types
```

## ğŸ“ˆ Grade Calculation Formula

### Complete Formula:
```
MODULE_SCORE = (LESSON_SCORE Ã— LESSON_WEIGHT_USED) + 
               (ACTIVITY_SCORE Ã— ACTIVITY_WEIGHT_USED)

Where:
  LESSON_SCORE = (Completed Lessons / Total Lessons) Ã— 100
  
  ACTIVITY_SCORE = Î£(Type_Score[i] Ã— Normalized_Weight[i])
                   for all present activity types
  
  LESSON_WEIGHT_USED = {
    configured_weight     if has_lessons AND has_activities
    100                   if has_lessons AND NOT has_activities
    0                     if NOT has_lessons
  }
  
  ACTIVITY_WEIGHT_USED = {
    configured_weight     if has_lessons AND has_activities
    100                   if NOT has_lessons AND has_activities
    0                     if NOT has_activities
  }
  
  Normalized_Weight[type] = (Configured_Weight[type] / Total_Configured) Ã— 100
                            where Total_Configured = Î£ Configured_Weight
                            for all present types
```

### Constraints:
```
âœ“ LESSON_WEIGHT_USED + ACTIVITY_WEIGHT_USED = 100% (always)
âœ“ Î£ Normalized_Weight[i] = 100% (for present types)
âœ“ Module score range: [0, 100]
```

---

**Last Updated**: January 17, 2025  
**Purpose**: Visual reference for dynamic weight system
